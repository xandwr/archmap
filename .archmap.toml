# Archmap Configuration
# This file configures architectural analysis for your project.

[thresholds]
# Maximum lines before a file is flagged as a "god object"
# Default: 500
god_object_lines = 500

# Maximum number of modules importing a single module before flagging high coupling
# Default: 5
coupling_fanin = 5

# Minimum number of boundary violations before reporting
# Default: 2
boundary_violation_min = 2

# Maximum dependency chain depth before flagging (A → B → C → D → E)
# Default: 5
max_dependency_depth = 5

# Minimum cohesion score (ratio of internal vs external dependencies)
# Range: 0.0 to 1.0. Lower scores indicate module is doing too many unrelated things.
# Default: 0.3
min_cohesion = 0.3

# Architectural Boundaries
# Define patterns that indicate crossing architectural boundaries.
# Scattered boundary crossings often indicate missing abstraction layers.

[boundaries.persistence]
name = "Persistence"
indicators = [
    "sqlx::",
    "diesel::",
    "sea_orm::",
    "prisma.",
    "SELECT ",
    "INSERT ",
    "UPDATE ",
    "DELETE ",
]
suggestion = "Consider centralizing in a repository/data access layer"

[boundaries.network]
name = "Network"
indicators = [
    "reqwest::",
    "hyper::",
    "fetch(",
    "axios.",
    "requests.",
    "http.get",
    "http.post",
]
suggestion = "Consider centralizing in an API client service"

[boundaries.filesystem]
name = "Filesystem"
indicators = [
    "std::fs::",
    "tokio::fs::",
    "fs.read",
    "fs.write",
    "open(",
]
suggestion = "Consider centralizing file operations or using dependency injection"

# Custom boundaries example (uncomment to use):
# [boundaries.logging]
# name = "Logging"
# indicators = ["log::", "tracing::", "console.log", "print("]
# suggestion = "Consider using a centralized logging facade"
